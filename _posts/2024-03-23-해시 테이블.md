---
layout: post
title: "[자료구조] 해시 테이블(Hash Tables)"
date: 2024-03-22 15:00:00
categories: 자료구조
---

---

## 해시 테이블이란

해시 테이블은 키-값 쌍을 저장하는 자료 구조이다. 키를 해시 함수에 입력하여 해시 값을 계산하고, 해시 값을 사용하여 키와 값을 저장하는 위치를 결정한다. 이를 통해 특정 키에 대한 값을 빠르게 찾을 수 있다.

---

## 해시 테이블을 왜 배워야 하는가?

해시 테이블은 데이터를 빠르게 검색하고 저장하는 데 사용되는 중요한 자료 구조이다. 해시 테이블을 배우면 프로그래밍 성능을 향상시키고, 공간 효율성을 높이고, 다양한 분야에서 활용할 수 있다.

---

### 해시 테이블의 장점

- 데이터를 빠르게 검색할 수 있도록 설계되었다. 데이터 검색 속도가 중요한 프로그램의 성능을 크게 향상시킬 수 있다.
- 데이터를 효율적으로 저장할 수 있도록 설계되었다. 데이터 저장 공간을 절약할 수 있다.
- 다양한 분야에서 활용된다. 캐시, 데이터베이스 인덱스, 암호화, 집합 자료 구조 등 다양한 분야에서 해시 테이블이 사용된다.

---

## 언어별 해시 테이블 사용 자료 구조

| 언어       	| 자료 구조       	|
|------------	|-----------------	|
| Python     	| Dictionaries 	|
| JavaScript 	| Objects, Maps   	|
| Java       	| HashMap         	|
| C++        	| unordered_map   	|
| Go         	| map             	|

---

## 해시 함수(Hash Function)

해시 함수는 임의 길이의 데이터를 입력 받아 고정 길이의 숫자인 해시값을 생성하는 함수이다. 데이터 검색, 무결성 검사, 암호화 등 다양한 분야에서 활용된다.

### 해시 함수 특징

- 단방향성: 해시값을 통해 입력 데이터를 쉽게 추론할 수 없다.
- 고정 길이: 입력 데이터 길이에 관계없이 출력 해시값 길이는 일정하다.
- 충돌 가능성: 서로 다른 입력 데이터가 동일한 해시값을 가질 수 있다.

### 해시 함수 작동 방식

1. 데이터 전처리: 입력 데이터를 해시 함수에 적합한 형식으로 변환한다. 예를 들어, 문자열 데이터를 숫자 코드로 변환하거나, 이미지 데이터를 픽셀 값으로 변환하는 작업이 이루어진다.

2. 압축: 변환된 데이터를 고정 길이의 비트 문자열로 변환한다. 이 과정에서 데이터의 일부 정보는 손실될 수 있지만, 주요 특징은 유지된다.

3. 해시값 생성: 압축된 비트 문자열을 기반으로 해시값을 계산한다. 일반적으로 여러 단계의 계산 과정을 통해 해시값을 생성하며, 이 과정은 사용되는 해시 함수 알고리즘에 따라 다르다.

### 해시 함수 주요 알고리즘

- MD5: 128비트 해시값 생성, 빠르고 효율적이지만 충돌 가능성이 높다.
- SHA-1: 160비트 해시값 생성, MD5보다 안전하지만 속도가 느리다.
- SHA-256: 256비트 해시값 생성, 높은 보안성과 속도를 제공한다.

### 해시 함수 활용 분야

1. 데이터 검색
    - 해시 테이블을 활용하여 데이터를 빠르게 검색할 수 있다. 
    - 해시 테이블은 키와 값의 쌍을 저장하는 자료 구조이며, 키를 해시 함수를 통해 해시값으로 변환하여 데이터를 저장한다. 데이터를 빠르게 찾을 수 있다.

2. 데이터 무결성 검사
    - 데이터 변조 여부를 확인하는 데 사용된다.
    - 데이터를 전송하거나 저장하기 전에 해시값을 계산하고 저장한다. 이후 데이터를 받거나 불러올 때 다시 해시값을 계산하여 이전에 계산된 값과 비교한다. 만약 값이 다르다면 데이터가 변조되었음을 알 수 있다.

3. 암호화
    - 비밀번호 등 중요 정보를 안전하게 보호하는 데 사용된다.
    - 비밀번호를 해시값으로 변환하여 저장한다. 이 경우 비밀번호가 유출되어도 실제 비밀번호를 알아내기 어렵다.

4. 블록체인
    - 블록체인 기술의 핵심 요소로 활용된다.
    - 블록체인은 거래 정보를 블록이라는 단위로 연결하여 관리하는 시스템이다. 각 블록에는 이전 블록의 해시값이 포함되어 있어 데이터 위변조를 방지된다.

---

## 좋은 해시 함수를 결정하는 기준

1. 충돌 가능성 최소화
    - 서로 다른 입력 데이터가 동일한 해시값을 가질 가능성을 최소화해야 한다. 충돌 가능성이 높으면 데이터 검색 및 무결성 검사 등에서 문제가 발생할 수 있다.

2. 빠른 연산 속도
    - 데이터 처리 속도를 높이기 위해 해시 함수는 빠르게 연산되어야 한다. 특히, 실시간 처리가 필요한 경우 빠른 속도가 중요하다.

3. 고르게 분포된 해시값
    - 입력 데이터가 어떤 특성을 가지고 있든 해시값이 전체 해시 공간에 고르게 분포되어야 한다. 특정 값에 집중되는 경우 해시 충돌 가능성이 높아질 수 있다.

4. 입력 데이터 전체 사용
    - 해시 함수는 입력 데이터의 모든 정보를 사용하여 해시값을 생성해야 한다. 일부 정보만 사용하면 충돌 가능성이 높아질 수 있다.

---

## 해시 충돌 해결하기

해시 충돌은 두 개 이상의 서로 다른 키가 동일한 해시값을 가지는 경우 발생한다.

해시 충돌을 해결하는 방법은 크게 두 가지로 나눌 수 있다.

- 개방 주소법(Open Addressing)
- 체이닝(Chaining)

### 개방 주소법(Open Addressing)

해시 충돌 발생 시, 해시 테이블의 빈 공간에 데이터를 저장하는 방법이다.

#### 선형 탐색(Linear Probing)

- 가장 간단한 개방 주소법이다.
- 충돌 발생 시, 다음 빈 공간을 찾아 데이터를 저장한다.
- 구현이 간단하고 캐시 효율이 높지만, 클러스터링 현상이 발생할 수 있다.

#### 이중 해시(Double Hashing)

- 두 개의 해시 함수를 사용하여 충돌 발생 시 다른 위치를 찾는 방법이다.
- 선형 탐색보다 클러스터링 현상을 줄일 수 있지만, 두 개의 해시 함수를 계산해야 하므로 연산량이 증가한다.

#### Quadratic Probing

- 충돌 발생 시, 해시값에 제곱 연산을 수행하여 다음 위치를 찾는 방법이다.
- 이중 해시보다 클러스터링 현상을 더욱 줄일 수 있지만, 계산량이 더 많이 증가한다.

### 체이닝 (Chaining)

해시 충돌 발생 시, 연결 리스트를 사용하여 데이터를 관리하는 방법이다.

#### 연결 리스트(Linked List)

해시 충돌 발생 시, 연결 리스트에 새로운 노드를 추가하여 데이터를 저장한다. 간단하지만 검색 속도가 느려질 수 있다.

#### 완전 해시(Perfect Hashing)

모든 키에 대해 충돌이 발생하지 않는 해시 함수를 사용하는 방법이다. 충돌이 발생하지 않으므로 검색 속도가 빠르지만, 완전 해시 함수를 찾는 것이 어렵고 해시 테이블 크기가 커질 수 있다.

---

## 해시 테이블의 Big O

해시 테이블의 평균 시간 복잡도는 `O(1)`이다. 그러나 이는 특정 조건을 만족할 때만 가능하며, 상황에 따라 시간 복잡도가 달라질 수 있다.

1. 평균 시간 복잡도 `O(1)`
    - 해시 함수가 고른 분포를 가지고 있어야 한다.
    - 해시 테이블의 크기가 적절해야 한다.
    - 로드 팩터(데이터 개수 / 해시 테이블 크기)가 낮아야 합니다.

2. 최악의 경우 시간 복잡도 `O(n)`
    - 해시 함수가 충돌을 많이 발생시키거나 해시 테이블의 크기가 너무 작거나 로드 팩터가 높으면, 특정 셀에 데이터가 집중될 가능성이 높아진다.
    - 이 경우, 데이터를 찾거나 삽입/삭제하는 데 필요한 연산 횟수는 데이터 개수에 비례하게 증가한다.

---

## 결론

해시 테이블은 키-값 쌍을 저장하는 자료 구조이며, 빠른 검색이 가능하다. 평균 시간 복잡도는 O(1)이지만, 최악의 경우 O(n)까지 가능하다. 데이터베이스, 캐시, 인덱싱 등 다양한 분야에서 사용된다.